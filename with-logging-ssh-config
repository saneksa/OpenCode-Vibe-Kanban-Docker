# Minimal SSH configuration - Add logging output redirection

# Port
Port 2222

# Listen address - ONLY on localhost
ListenAddress 127.0.0.1

# Authentication
PermitRootLogin yes
PasswordAuthentication yes

# Disable PAM (simple password auth)
UsePAM no

# Logging - Redirect to custom location
SyslogFacility AUTH
LogLevel INFO

# Redirect stderr to stdout
SyslogErrFacility AUTH
LogLevel DEBUG

# Logging to stdout (for debugging)
SyslogFacility AUTH
LogLevel INFO

# Allow root user
AllowUsers root

# Disable empty passwords
PermitEmptyPasswords no

# Disable all forwardings
GatewayPorts no
X11Forwarding no
AllowTcpForwarding no
AllowAgentForwarding no
PermitTunnel no
X11Forwarding no

# Disable sftp
Subsystem sftp /usr/lib/openssh/sftp-server

# Disable keyboard-interactive
KbdInteractiveAuthentication no

# Disable challenge-response
KbdInteractiveAuthentication no

# Kerberos options
KerberosAuthentication no
KerberosOrLocalPasswd no
KerberosTicketCleanup no
KerberosGetAFSToken no
KSSAPIAuthentication no
GSSAPICleanupCredentials no
GSSAPIKeyExchange no

# PAM - simple password auth
account    sufficient
session    sufficient
password    sufficient

# User environment
PermitUserEnvironment no

# Disable tunnelling
PermitTunnel no
X11Forwarding no

# Disable sftp
Subsystem sftp /usr/lib/openssh/sftp-server

# Max auth attempts
MaxAuthTries 6

# Max sessions
MaxSessions 10

# TCP keepalive
TCPKeepAlive yes
ClientAliveInterval 300
ClientAliveCountMax 3

# Disable PAM - use simple password auth
account    sufficient
session    sufficient
password    sufficient