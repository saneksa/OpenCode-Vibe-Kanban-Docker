# Minimal SSH configuration for Docker container

# Listen on port 2211
Port 2211

# Listen on all interfaces
ListenAddress 0.0.0.0

# Address family
AddressFamily inet

# Authentication
PermitRootLogin yes
PasswordAuthentication yes

# PAM authentication (Unix, not nologin)
UsePAM yes

# Logging
SyslogFacility AUTH
LogLevel INFO

# Public key authentication
PubkeyAuthentication yes

# Disable empty passwords
PermitEmptyPasswords no

# Disable keyboard-interactive
KbdInteractiveAuthentication no

# Disable challenge-response
KbdInteractiveAuthentication no

# Max auth attempts
MaxAuthTries 6

# Max sessions
MaxSessions 10

# TCP keepalive
TCPKeepAlive yes
ClientAliveInterval 300
ClientAliveCountMax 3

# Enable TCP forwarding for VSCode SSH
AllowTcpForwarding yes
AllowAgentForwarding no
PermitTunnel no
X11Forwarding no

# Allow users
AllowUsers user

# Disable sftp subsystem
Subsystem sftp /usr/lib/openssh/sftp-server

# PAM configuration (UsePAM yes above handles PAM via /etc/pam.d/sshd)
